<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/nav-bar.css">
    <link rel="stylesheet" href="../styles/side-bar.css">
    <link rel="stylesheet" href="../styles/main-content.css">
    <link rel="stylesheet" href="../styles/searchmenu.css">
    <link rel="stylesheet" href="../styles/listingsPage.css">
    <link rel='stylesheet'
      href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <title>GroupsTeacher</title>
    <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body,
    html {
      position: relative;
      height: 100%;
      font-family: Lato, normal;

    }
  </style>

  </head>

  <body>

    <!-- This is the NavBar -->
    <nav class="navbar">
      <div class="navleft">
        <div class="logo"><a href="#">In&lt;form&gt;atiX</a> </div>
      </div>
      <div class="navright">

        <ul>
          <li><a href="/loggedTeacher">Home</a></li>
          <li><a href="/">LogOut</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </div>
    </nav>

    <!-- This is the SideBar -->
    <nav class="sidebar">
      <div class="top">
        <div class="menu">
          <i class='bx bx-code'></i>
          <span>Menu</span>
        </div>
        <i class='bx bx-menu' id="btn"></i>
      </div>
      <ul>
        <li><a href="/loggedTeacher"><i class='bx bxs-home'></i><span
              class="navitem">Home</span></a></li>
        <li><a href="../../to be modified/ProfilProfesor.html"><i
              class='bx bxs-user-circle'></i><span
              class="navitem">Profile</span></a></li>
        <li><a href="/VisGroupsTeacher"><i class='bx bxs-group'></i><span
              class="navitem">Groups</span></a></li>
        <li><a href="/VisHWTeacher"><i class='bx bxs-book-alt'></i><span
              class="navitem">Homeworks</span></a></li>
        <li><a href="../../to be modified/ProblemePropuse.html"><i
              class='bx bxs-book-content'></i><span class="navitem">Proposed
              Problems</span></a></li>
        <li><a href="/createHW"><i class='bx bxs-edit'></i><span
              class="navitem">New Problem</span></a></li>
        <li><a href="#"><i class='bx bxs-contact'></i><span
              class="navitem">Contact</span></a></li>
        <li><a href="/"><i class='bx bx-log-out'></i><span
              class="navitem">LogOut</span></a></li>
      </ul>
    </nav>

    <div class="maincontent">

      <div class="searchmenu">
        <div class="searchbox">
          <header>Group Name</header>
          <div class="searchfield">
            <form id="search">

              <div class="seachBar">
                <input class="search-input" type="search" placeholder="Search">
                <i class='bx bx-search-alt-2'></i>
              </div>

            </form>
          </div>
        </div>

        <div class="filterbox">

          <form id="filtermenu">

            <header>Group</header>
            <div class="dropdown">
              <div class="selectbtn">
                <span class="sBtn-text">Select your option</span>
                <i class="bx bx-chevron-down"></i>
              </div>

              <ul class="dmenu">
                <li class="option"><span class="option-text">None</span></li>
                <li class="option"><span class="option-text">A1</span></li>
                <li class="option"><span class="option-text">B1</span></li>
                <li class="option"><span class="option-text">A2</span></li>
              </ul>

            </div>

            <button type="submit" class="filter">Filter</button>

            <div class="createnew">
              <ul>
                <li><a href="#"><i class='bx bx-group'></i></a></li>
              </ul>
              <i class='bx bx-plus'></i>
              <header class="header">New Group</header>
            </div>

          </form>

        </div>
      </div>

      <div class="GroupsPage">

      </div>
    </div>

    <script src="../scripts/script.js"></script>
    <script>
  // Funcție pentru a încărca și afișa lista de grupe din fișierul JSON
  function loadGroups(groups) {
    const groupsContainer = document.querySelector('.GroupsPage');
    groupsContainer.innerHTML = '';
    groups.forEach(group => {
      const problemElement = `
        <div class="group">
          <h1 class="group-title">${group.Grupa}</h1>
          <p class="group-label">${group.Materie}</p>
        </div>
      `;
      groupsContainer.insertAdjacentHTML('beforeend', problemElement);
    });
  }

  // Apelăm funcția pentru a încărca și afișa lista de grupe la încărcarea paginii
  window.onload = function() {
  // Obținem ID-ul profesorului din stocarea locală
  const profesorID = localStorage.getItem('id');

  // Verificăm dacă ID-ul profesorului există în stocarea locală
  if (profesorID) {
    // Construim corpul JSON pentru cererea POST
    const requestBody = JSON.stringify({ "profesorID": parseInt(profesorID) });

    // Facem cererea către backend cu corpul JSON
    fetch('http://localhost:3000/classes/all/Teacher', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: requestBody
    })
    .then(response => response.json())
    .then(data => {
      loadGroups(data);
    })
    .catch(error => console.error('Error loading groups:', error));
  } else {
    console.error('profesorID is not available in local storage');
  }
};
  </script>
  </body>
</html>